
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                        danger: '#EF4444',
                        warning: '#F97316'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Sarabun', sans-serif;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .slide-in {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg border-b-4 border-primary">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-xl md:text-2xl font-bold text-primary">üó≥Ô∏è ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á</h1>
                    </div>
                </div>
                <div class="flex items-center">
                    <button id="newElectionBtn" class="bg-primary hover:bg-blue-600 text-white px-3 py-2 md:px-4 md:py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-md text-sm md:text-base">
                        + ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏°‡πà
                    </button>
                </div>
            </div>
        </div>
    </nav>
    <!-- Main Content -->
    <main class="max-w-7xl mx-auto py-6 md:py-8 px-4 sm:px-6 lg:px-8">
        <!-- Welcome Section -->
        <div id="welcomeSection" class="text-center mb-10 md:mb-12 fade-in">
            <h2 class="text-2xl md:text-4xl font-bold text-gray-800 mb-3 md:mb-4">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á</h2>
            <p class="text-lg md:text-xl text-gray-600 mb-6 md:mb-8">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ö‡∏ö Real-time</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 max-w-4xl mx-auto">
                <div class="bg-white p-5 md:p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                    <div class="text-3xl md:text-4xl mb-3 md:mb-4">üìä</div>
                    <h3 class="text-base md:text-lg font-semibold text-gray-800 mb-2">‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ö‡∏ö Real-time</h3>
                    <p class="text-sm md:text-base text-gray-600">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
                </div>
                <div class="bg-white p-5 md:p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                    <div class="text-3xl md:text-4xl mb-3 md:mb-4">üë•</div>
                    <h3 class="text-base md:text-lg font-semibold text-gray-800 mb-2">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£</h3>
                    <p class="text-sm md:text-base text-gray-600">‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢</p>
                </div>
                <div class="bg-white p-5 md:p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                    <div class="text-3xl md:text-4xl mb-3 md:mb-4">üèõÔ∏è</div>
                    <h3 class="text-base md:text-lg font-semibold text-gray-800 mb-2">‡∏´‡∏•‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á</h3>
                    <p class="text-sm md:text-base text-gray-600">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô</p>
                </div>
            </div>
        </div>
        <!-- Elections List -->
        <div id="electionsSection" class="mb-8">
            <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-5 md:mb-6">‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
            <div id="electionsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                <!-- Elections will be dynamically loaded here -->
            </div>
            <div id="noElections" class="text-center py-10 md:py-12 bg-white rounded-xl shadow-lg">
                <div class="text-4xl md:text-6xl mb-3 md:mb-4">üó≥Ô∏è</div>
                <h4 class="text-lg md:text-xl font-semibold text-gray-600 mb-2">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á</h4>
                <p class="text-gray-500 mb-5 md:mb-6">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏°‡πà</p>
                <button onclick="showCreateElectionModal()" class="bg-primary hover:bg-blue-600 text-white px-5 py-2 md:px-6 md:py-3 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 text-sm md:text-base">
                    ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
                </button>
            </div>
        </div>
    </main>
    <!-- Password Modal -->
    <div id="passwordModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 modal-overlay">
        <div class="bg-white rounded-xl p-6 md:p-8 max-w-md w-full mx-4 modal-content">
            <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-5 md:mb-6">‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h3>
            <form id="passwordForm">
                <div class="mb-5 md:mb-6">
                    <label for="accessCode" class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                    <input type="password" id="accessCode" name="accessCode" required 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                           placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á">
                </div>
                <div class="flex justify-end space-x-3">
                    <button type="button" onclick="hidePasswordModal()" 
                            class="px-4 py-2 text-gray-600 hover:text-gray-800 font-medium transition-colors duration-200 text-sm md:text-base">
                        ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                    </button>
                    <button type="submit" 
                            class="bg-primary hover:bg-blue-600 text-white px-5 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 text-sm md:text-base">
                        ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                    </button>
                </div>
            </form>
        </div>
    </div>
    <!-- Create Election Modal -->
    <div id="createElectionModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 modal-overlay">
        <div class="bg-white rounded-xl p-6 md:p-8 max-w-md w-full mx-4 modal-content">
            <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-5 md:mb-6">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏°‡πà</h3>
            <form id="createElectionForm">
                <div class="mb-4">
                    <label for="electionName" class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á</label>
                    <input type="text" id="electionName" name="electionName" required 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                           placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 2567">
                </div>
                <div class="mb-5 md:mb-6">
                    <label for="electionDescription" class="block text-sm font-medium text-gray-700 mb-2">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</label>
                    <textarea id="electionDescription" name="electionDescription" rows="3"
                              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                              placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á"></textarea>
                </div>
                <div class="flex justify-end space-x-3">
                    <button type="button" onclick="hideCreateElectionModal()" 
                            class="px-4 py-2 text-gray-600 hover:text-gray-800 font-medium transition-colors duration-200 text-sm md:text-base">
                        ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                    </button>
                    <button type="submit" 
                            class="bg-primary hover:bg-blue-600 text-white px-5 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 text-sm md:text-base">
                        ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á
                    </button>
                </div>
            </form>
        </div>
    </div>
    <!-- Election Management Page -->
    <div id="electionManagementPage" class="hidden">
        <div class="max-w-7xl mx-auto py-6 md:py-8 px-4 sm:px-6 lg:px-8">
            <!-- Header -->
            <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6 md:mb-8 gap-4">
                <div>
                    <button onclick="showMainPage()" class="text-primary hover:text-blue-600 font-medium mb-2 transition-colors duration-200 text-sm md:text-base">
                        ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                    </button>
                    <h2 id="currentElectionTitle" class="text-2xl md:text-3xl font-bold text-gray-800"></h2>
                    <p id="currentElectionDescription" class="text-gray-600 mt-2 text-sm md:text-base"></p>
                </div>
                <div class="flex flex-wrap gap-2 md:gap-4">
                    <button id="addCandidateBtn" class="bg-secondary hover:bg-green-600 text-white px-3 py-2 md:px-4 md:py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 text-sm md:text-base">
                        + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£
                    </button>
                    <button id="startVotingBtn" class="bg-accent hover:bg-yellow-500 text-white px-3 py-2 md:px-4 md:py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 text-sm md:text-base">
                        ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                    </button>
                    <a id="viewResultsLink" href="#" target="_blank" 
                       class="bg-primary hover:bg-blue-600 text-white px-3 py-2 md:px-4 md:py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 text-sm md:text-base flex items-center">
                        üìä ‡∏î‡∏π‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                    </a>
                </div>
            </div>
            <!-- Candidates Section -->
            <div class="bg-white rounded-xl shadow-lg p-5 md:p-6 mb-6 md:mb-8">
                <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-4">‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                <div id="candidatesList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4">
                    <!-- Candidates will be dynamically loaded here -->
                </div>
                <div id="noCandidates" class="text-center py-6 md:py-8">
                    <div class="text-3xl md:text-4xl mb-3 md:mb-4">üë§</div>
                    <p class="text-gray-500 mb-4 text-sm md:text-base">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£</p>
                    <button onclick="showAddCandidateModal()" class="bg-secondary hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 text-sm md:text-base">
                        ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Ñ‡∏ô‡πÅ‡∏£‡∏Å
                    </button>
                </div>
            </div>
            <!-- Voting Section -->
            <div id="votingSection" class="bg-white rounded-xl shadow-lg p-5 md:p-6">
                <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-4">‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h3>
                <div id="votingArea" class="hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4 mb-5 md:mb-6">
                        <div id="votingCandidates" class="grid grid-cols-1 gap-3 md:gap-4 md:col-span-3">
                            <!-- Voting candidates will be loaded here -->
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4 md:p-5">
                            <h4 class="font-semibold text-gray-800 mb-3 md:mb-4">‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏¥‡πÄ‡∏®‡∏©</h4>
                            <div class="space-y-3">
                                <button onclick="electionSystem.showVoteConfirmation('noVote')" 
                                        class="w-full bg-warning hover:bg-orange-600 text-white py-2 px-3 rounded-lg font-medium transition-all duration-200 text-sm md:text-base">
                                    ‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                                </button>
                                <button onclick="electionSystem.showVoteConfirmation('spoiled')" 
                                        class="w-full bg-danger hover:bg-red-600 text-white py-2 px-3 rounded-lg font-medium transition-all duration-200 text-sm md:text-base">
                                    ‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏™‡∏µ‡∏¢
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <button id="endVotingBtn" class="bg-danger hover:bg-red-600 text-white px-5 py-2 md:px-6 md:py-3 rounded-lg font-medium transition-all duration-200 text-sm md:text-base">
                            ‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                        </button>
                    </div>
                </div>
                <div id="votingNotStarted" class="text-center py-6 md:py-8">
                    <div class="text-3xl md:text-4xl mb-3 md:mb-4">‚è≥</div>
                    <p class="text-gray-500 mb-4 text-sm md:text-base">‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°</p>
                    <p class="text-xs md:text-sm text-gray-400">‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</p>
                </div>
            </div>
            <!-- Results Section -->
            <div id="resultsSection" class="bg-white rounded-xl shadow-lg p-5 md:p-6 mt-6 md:mt-8">
                <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-4">‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (Real-time)</h3>
                <div id="resultsArea">
                    <!-- Results will be displayed here -->
                </div>
            </div>
        </div>
    </div>
    <!-- Add Candidate Modal -->
    <div id="addCandidateModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 modal-overlay">
        <div class="bg-white rounded-xl p-6 md:p-8 max-w-md w-full mx-4 modal-content">
            <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-5 md:mb-6">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£</h3>
            <form id="addCandidateForm">
                <div class="mb-4">
                    <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£</label>
                    <input type="text" id="candidateName" name="candidateName" required 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent"
                           placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•">
                </div>
                <div class="mb-4">
                    <label for="candidateNumber" class="block text-sm font-medium text-gray-700 mb-2">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£</label>
                    <input type="number" id="candidateNumber" name="candidateNumber" required min="1"
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent"
                           placeholder="‡πÄ‡∏ä‡πà‡∏ô 1, 2, 3">
                </div>
                <div class="mb-5 md:mb-6">
                    <label for="candidateParty" class="block text-sm font-medium text-gray-700 mb-2">‡∏û‡∏£‡∏£‡∏Ñ/‡∏Å‡∏•‡∏∏‡πà‡∏° (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</label>
                    <input type="text" id="candidateParty" name="candidateParty"
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent"
                           placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏£‡∏£‡∏Ñ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°">
                </div>
                <div class="flex justify-end space-x-3">
                    <button type="button" onclick="hideAddCandidateModal()" 
                            class="px-4 py-2 text-gray-600 hover:text-gray-800 font-medium transition-colors duration-200 text-sm md:text-base">
                        ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                    </button>
                    <button type="submit" 
                            class="bg-secondary hover:bg-green-600 text-white px-5 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 text-sm md:text-base">
                        ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£
                    </button>
                </div>
            </form>
        </div>
    </div>
    <!-- Vote Confirmation Modal -->
    <div id="voteConfirmationModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 modal-overlay">
        <div class="bg-white rounded-xl p-6 md:p-8 max-w-md w-full mx-4 modal-content">
            <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-4">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h3>
            <p id="voteConfirmationMessage" class="text-gray-700 mb-6 text-sm md:text-base"></p>
            <div class="flex justify-end space-x-3">
                <button id="cancelVoteBtn" 
                        class="px-4 py-2 text-gray-600 hover:text-gray-800 font-medium transition-colors duration-200 text-sm md:text-base">
                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                </button>
                <button id="confirmVoteBtn" 
                        class="bg-primary hover:bg-blue-600 text-white px-5 py-2 rounded-lg font-medium transition-all duration-200 text-sm md:text-base">
                    ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                </button>
            </div>
        </div>
    </div>
    <script>
        // Election System JavaScript
        class ElectionSystem {
            constructor() {
                this.elections = JSON.parse(localStorage.getItem('elections')) || [];
                this.currentElection = null;
                this.votingActive = false;
                this.pendingVote = null; // For vote confirmation
                this.init();
            }
            
            init() {
                this.loadElections();
                this.setupEventListeners();
                this.showMainPage();
            }
            
            setupEventListeners() {
                // Main navigation
                document.getElementById('newElectionBtn').addEventListener('click', () => {
                    this.showPasswordModal();
                });
                
                // Password form
                document.getElementById('passwordForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.checkPassword();
                });
                
                // Create election form
                document.getElementById('createElectionForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.createElection();
                });
                
                // Add candidate form
                document.getElementById('addCandidateForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addCandidate();
                });
                
                // Election management buttons
                document.getElementById('addCandidateBtn').addEventListener('click', () => {
                    this.showAddCandidateModal();
                });
                
                document.getElementById('startVotingBtn').addEventListener('click', () => {
                    this.startVoting();
                });
                
                document.getElementById('endVotingBtn').addEventListener('click', () => {
                    this.endVoting();
                });
                
                // Vote confirmation modal
                document.getElementById('cancelVoteBtn').addEventListener('click', () => {
                    this.hideVoteConfirmation();
                });
                
                document.getElementById('confirmVoteBtn').addEventListener('click', () => {
                    this.confirmVote();
                });
            }
            
            // Password Management
            showPasswordModal() {
                document.getElementById('passwordModal').classList.remove('hidden');
                document.getElementById('passwordModal').classList.add('flex');
                document.getElementById('passwordForm').reset();
            }
            
            hidePasswordModal() {
                document.getElementById('passwordModal').classList.add('hidden');
                document.getElementById('passwordModal').classList.remove('flex');
            }
            
            checkPassword() {
                const password = document.getElementById('accessCode').value.trim();
                if (password === 'personnel101') {
                    this.hidePasswordModal();
                    this.showCreateElectionModal();
                } else {
                    alert('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                }
            }
            
            // Election Management
            createElection() {
                const name = document.getElementById('electionName').value.trim();
                const description = document.getElementById('electionDescription').value.trim();
                
                if (!name) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á');
                    return;
                }
                
                const election = {
                    id: Date.now().toString(),
                    name: name,
                    description: description,
                    candidates: [],
                    votes: {
                        noVote: 0,
                        spoiled: 0
                    },
                    status: 'setup', // setup, voting, ended
                    createdAt: new Date().toISOString()
                };
                
                this.elections.push(election);
                this.saveElections();
                this.hideCreateElectionModal();
                this.loadElections();
                this.showNotification('‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            }
            
            deleteElection(electionId) {
                if (confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ?')) {
                    this.elections = this.elections.filter(e => e.id !== electionId);
                    this.saveElections();
                    this.loadElections();
                    this.showNotification('‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
                }
            }
            
            openElection(electionId) {
                this.currentElection = this.elections.find(e => e.id === electionId);
                if (this.currentElection) {
                    this.showElectionManagementPage();
                }
            }
            
            // Candidate Management
            addCandidate() {
                const name = document.getElementById('candidateName').value.trim();
                const number = parseInt(document.getElementById('candidateNumber').value);
                const party = document.getElementById('candidateParty').value.trim();
                
                if (!name || !number) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÅ‡∏•‡∏∞‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç');
                    return;
                }
                
                // Check if candidate number already exists
                if (this.currentElection.candidates.some(c => c.number === number)) {
                    alert('‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß');
                    return;
                }
                
                const candidate = {
                    id: Date.now().toString(),
                    name: name,
                    number: number,
                    party: party || '',
                    votes: 0
                };
                
                this.currentElection.candidates.push(candidate);
                this.currentElection.votes[candidate.id] = 0;
                this.updateCurrentElection();
                this.hideAddCandidateModal();
                this.loadCandidates();
                this.loadResults();
                this.showNotification('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            }
            
            deleteCandidate(candidateId) {
                if (confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ?')) {
                    this.currentElection.candidates = this.currentElection.candidates.filter(c => c.id !== candidateId);
                    delete this.currentElection.votes[candidateId];
                    this.updateCurrentElection();
                    this.loadCandidates();
                    this.loadResults();
                    this.showNotification('‡∏•‡∏ö‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
                }
            }
            
            // Voting System
            startVoting() {
                if (this.currentElection.candidates.length === 0) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô');
                    return;
                }
                
                this.currentElection.status = 'voting';
                this.votingActive = true;
                this.updateCurrentElection();
                this.loadVotingArea();
                this.showNotification('‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡πâ‡∏ß', 'success');
            }
            
            endVoting() {
                if (confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô?')) {
                    this.currentElection.status = 'ended';
                    this.votingActive = false;
                    this.updateCurrentElection();
                    this.loadVotingArea();
                    this.showNotification('‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡πâ‡∏ß', 'info');
                }
            }
            
            // Show vote confirmation modal for special votes
            showVoteConfirmation(voteType) {
                if (!this.votingActive || this.currentElection.status !== 'voting') {
                    alert('‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà');
                    return;
                }
                
                this.pendingVote = voteType;
                
                const messages = {
                    'noVote': '‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô "‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô"?',
                    'spoiled': '‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô "‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏™‡∏µ‡∏¢"?'
                };
                
                document.getElementById('voteConfirmationMessage').textContent = messages[voteType];
                document.getElementById('voteConfirmationModal').classList.remove('hidden');
                document.getElementById('voteConfirmationModal').classList.add('flex');
            }
            
            // Confirm vote after modal for special votes and candidate votes
            confirmVote() {
                if (this.pendingVote === 'noVote') {
                    // Handle "‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô"
                    this.currentElection.votes.noVote = (this.currentElection.votes.noVote || 0) + 1;
                    this.updateCurrentElection();
                    this.loadResults();
                    this.loadVotingArea();
                    this.showNotification("‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô '‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô' ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß", "success");
                } else if (this.pendingVote === 'spoiled') {
                    // Handle "‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏™‡∏µ‡∏¢"
                    this.currentElection.votes.spoiled = (this.currentElection.votes.spoiled || 0) + 1;
                    this.updateCurrentElection();
                    this.loadResults();
                    this.loadVotingArea();
                    this.showNotification("‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô '‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏™‡∏µ‡∏¢' ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß", "success");
                } else if (this.pendingVote) {
                    // Handle candidate vote (this.pendingVote is the candidateId)
                    const candidateId = this.pendingVote;
                    this.currentElection.votes[candidateId] = (this.currentElection.votes[candidateId] || 0) + 1;
                    // Update candidate votes in the candidates array
                    const candidateIndex = this.currentElection.candidates.findIndex(c => c.id === candidateId);
                    if (candidateIndex !== -1) {
                        this.currentElection.candidates[candidateIndex].votes = this.currentElection.votes[candidateId];
                    }
                    this.updateCurrentElection();
                    this.loadResults();
                    this.loadVotingArea();
                    this.showNotification("‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß", "success");
                }
                
                this.hideVoteConfirmation();
            }
            
            // Vote for candidate - now shows confirmation
            vote(candidateId) {
                if (!this.votingActive || this.currentElection.status !== 'voting') {
                    alert('‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà');
                    return;
                }
                
                // Store the candidate ID for confirmation
                this.pendingVote = candidateId;
                
                // Find the candidate to get their name
                const candidate = this.currentElection.candidates.find(c => c.id === candidateId);
                if (candidate) {
                    document.getElementById('voteConfirmationMessage').textContent = 
                        `‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏´‡πâ "${candidate.name}"?`;
                } else {
                    document.getElementById('voteConfirmationMessage').textContent = 
                        `‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ô‡∏µ‡πâ?`;
                }
                
                document.getElementById('voteConfirmationModal').classList.remove('hidden');
                document.getElementById('voteConfirmationModal').classList.add('flex');
            }
            
            // Hide vote confirmation modal
            hideVoteConfirmation() {
                document.getElementById('voteConfirmationModal').classList.add('hidden');
                document.getElementById('voteConfirmationModal').classList.remove('flex');
                this.pendingVote = null;
            }
            
            // UI Management
            showMainPage() {
                document.getElementById('welcomeSection').style.display = 'block';
                document.getElementById('electionsSection').style.display = 'block';
                document.getElementById('electionManagementPage').style.display = 'none';
                this.loadElections();
            }
            
            showElectionManagementPage() {
                document.getElementById('welcomeSection').style.display = 'none';
                document.getElementById('electionsSection').style.display = 'none';
                document.getElementById('electionManagementPage').style.display = 'block';
                document.getElementById('currentElectionTitle').textContent = this.currentElection.name;
                document.getElementById('currentElectionDescription').textContent = this.currentElection.description || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢';
                
                // Update the results link
                const viewResultsLink = document.getElementById('viewResultsLink');
                viewResultsLink.href = `results.html?electionId=${this.currentElection.id}`;
                
                this.loadCandidates();
                this.loadVotingArea();
                this.loadResults();
            }
            
            showCreateElectionModal() {
                document.getElementById('createElectionModal').classList.remove('hidden');
                document.getElementById('createElectionModal').classList.add('flex');
                document.getElementById('createElectionForm').reset();
            }
            
            hideCreateElectionModal() {
                document.getElementById('createElectionModal').classList.add('hidden');
                document.getElementById('createElectionModal').classList.remove('flex');
            }
            
            showAddCandidateModal() {
                document.getElementById('addCandidateModal').classList.remove('hidden');
                document.getElementById('addCandidateModal').classList.add('flex');
                document.getElementById('addCandidateForm').reset();
            }
            
            hideAddCandidateModal() {
                document.getElementById('addCandidateModal').classList.add('hidden');
                document.getElementById('addCandidateModal').classList.remove('flex');
            }
            
            // Data Loading
            loadElections() {
                const electionsList = document.getElementById('electionsList');
                const noElections = document.getElementById('noElections');
                
                if (this.elections.length === 0) {
                    electionsList.style.display = 'none';
                    noElections.style.display = 'block';
                    return;
                }
                
                electionsList.style.display = 'grid';
                noElections.style.display = 'none';
                
                electionsList.innerHTML = this.elections.map(election => {
                    const statusBadge = this.getStatusBadge(election.status);
                    const candidateCount = election.candidates.length;
                    const totalVotes = Object.values(election.votes).reduce((sum, votes) => sum + votes, 0);
                    
                    return `
                        <div class="bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 p-5 md:p-6 border-l-4 border-primary">
                            <div class="flex justify-between items-start mb-3 md:mb-4">
                                <h4 class="text-base md:text-lg font-semibold text-gray-800">${election.name}</h4>
                                ${statusBadge}
                            </div>
                            <p class="text-gray-600 mb-3 md:mb-4 text-sm">${election.description || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢'}</p>
                            <div class="flex justify-between items-center text-xs md:text-sm text-gray-500 mb-3 md:mb-4">
                                <span>‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£: ${candidateCount} ‡∏Ñ‡∏ô</span>
                                <span>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: ${totalVotes} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-xs text-gray-400">
                                    ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠: ${new Date(election.createdAt).toLocaleDateString('th-TH')}
                                </span>
                                <div class="flex space-x-2">
                                    <button onclick="electionSystem.openElection('${election.id}')" 
                                            class="bg-primary hover:bg-blue-600 text-white px-3 py-1 rounded text-xs md:text-sm font-medium transition-colors duration-200">
                                        ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£
                                    </button>
                                    <button onclick="electionSystem.deleteElection('${election.id}')" 
                                            class="bg-danger hover:bg-red-600 text-white px-3 py-1 rounded text-xs md:text-sm font-medium transition-colors duration-200">
                                        ‡∏•‡∏ö
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            loadCandidates() {
                const candidatesList = document.getElementById('candidatesList');
                const noCandidates = document.getElementById('noCandidates');
                
                if (this.currentElection.candidates.length === 0) {
                    candidatesList.style.display = 'none';
                    noCandidates.style.display = 'block';
                    return;
                }
                
                candidatesList.style.display = 'grid';
                noCandidates.style.display = 'none';
                
                candidatesList.innerHTML = this.currentElection.candidates
                    .sort((a, b) => a.number - b.number)
                    .map(candidate => {
                        const votes = this.currentElection.votes[candidate.id] || 0;
                        return `
                            <div class="bg-gray-50 rounded-lg p-4 border-2 border-gray-200 hover:border-secondary transition-colors duration-200">
                                <div class="flex justify-between items-start mb-2">
                                    <div class="flex items-center">
                                        <span class="bg-secondary text-white rounded-full w-7 h-7 md:w-8 md:h-8 flex items-center justify-center text-sm font-bold mr-3">
                                            ${candidate.number}
                                        </span>
                                        <div>
                                            <h5 class="font-semibold text-gray-800 text-sm md:text-base">${candidate.name}</h5>
                                            ${candidate.party ? `<p class="text-xs md:text-sm text-gray-600">${candidate.party}</p>` : ''}
                                        </div>
                                    </div>
                                    <button onclick="electionSystem.deleteCandidate('${candidate.id}')" 
                                            class="text-danger hover:text-red-700 text-xs transition-colors duration-200">
                                        ‡∏•‡∏ö
                                    </button>
                                </div>
                                <div class="text-right">
                                    <span class="text-base md:text-lg font-bold text-primary">${votes} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</span>
                                </div>
                            </div>
                        `;
                    }).join('');
            }
            
            loadVotingArea() {
                const votingArea = document.getElementById('votingArea');
                const votingNotStarted = document.getElementById('votingNotStarted');
                const votingCandidates = document.getElementById('votingCandidates');
                
                if (this.currentElection.status === 'setup') {
                    votingArea.style.display = 'none';
                    votingNotStarted.style.display = 'block';
                    return;
                }
                
                votingArea.style.display = 'block';
                votingNotStarted.style.display = 'none';
                
                if (this.currentElection.candidates.length === 0) {
                    votingCandidates.innerHTML = '<p class="text-gray-500 text-center col-span-full">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£</p>';
                    return;
                }
                
                votingCandidates.innerHTML = this.currentElection.candidates
                    .sort((a, b) => a.number - b.number)
                    .map(candidate => {
                        const votes = this.currentElection.votes[candidate.id] || 0;
                        const isVotingActive = this.currentElection.status === 'voting';
                        
                        return `
                            <div class="bg-white rounded-lg p-4 md:p-6 border-2 border-gray-200 hover:border-primary transition-all duration-200 text-center">
                                <div class="mb-3 md:mb-4">
                                    <div class="bg-primary text-white rounded-full w-10 h-10 md:w-12 md:h-12 flex items-center justify-center text-lg md:text-xl font-bold mx-auto mb-2 md:mb-3">
                                        ${candidate.number}
                                    </div>
                                    <h5 class="font-semibold text-gray-800 mb-1 text-sm md:text-base">${candidate.name}</h5>
                                    ${candidate.party ? `<p class="text-xs md:text-sm text-gray-600 mb-2 md:mb-3">${candidate.party}</p>` : '<div class="mb-2 md:mb-3"></div>'}
                                </div>
                                <div class="mb-3 md:mb-4">
                                    <span class="text-xl md:text-2xl font-bold text-primary">${votes}</span>
                                    <p class="text-xs md:text-sm text-gray-600">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
                                </div>
                                ${isVotingActive ? `
                                    <button onclick="electionSystem.vote('${candidate.id}')" 
                                            class="w-full bg-secondary hover:bg-green-600 text-white py-2 px-3 md:px-4 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 pulse-animation text-sm md:text-base">
                                        ‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                                    </button>
                                ` : `
                                    <div class="w-full bg-gray-300 text-gray-600 py-2 px-3 md:px-4 rounded-lg font-medium text-sm md:text-base">
                                        ${this.currentElection.status === 'ended' ? '‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡πÅ‡∏•‡πâ‡∏ß' : '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô'}
                                    </div>
                                `}
                            </div>
                        `;
                    }).join('');
            }
            
            loadResults() {
                const resultsArea = document.getElementById('resultsArea');
                
                if (this.currentElection.candidates.length === 0) {
                    resultsArea.innerHTML = '<p class="text-gray-500 text-center">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£</p>';
                    return;
                }
                
                const totalVotes = Object.values(this.currentElection.votes).reduce((sum, votes) => sum + votes, 0);
                
                // Prepare all candidates and special votes for sorting
                const resultsData = [
                    ...this.currentElection.candidates.map(candidate => ({
                        ...candidate,
                        votes: this.currentElection.votes[candidate.id] || 0,
                        type: 'candidate'
                    })),
                    {
                        id: 'noVote',
                        name: '‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô',
                        votes: this.currentElection.votes.noVote || 0,
                        type: 'special'
                    },
                    {
                        id: 'spoiled',
                        name: '‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏™‡∏µ‡∏¢',
                        votes: this.currentElection.votes.spoiled || 0,
                        type: 'special'
                    }
                ];
                
                // Sort by votes (descending)
                resultsData.sort((a, b) => b.votes - a.votes);
                
                // Calculate percentages
                const resultsWithPercentages = resultsData.map(item => ({
                    ...item,
                    percentage: totalVotes > 0 ? ((item.votes / totalVotes * 100).toFixed(1)) : 0
                }));
                
                // Find winner (if any candidate has votes)
                const candidateResults = resultsData.filter(item => item.type === 'candidate');
                const winner = candidateResults.length > 0 ? 
                    candidateResults.reduce((prev, current) => (prev.votes > current.votes) ? prev : current) : 
                    null;
                
                resultsArea.innerHTML = `
                    <div class="mb-5 md:mb-6">
                        <div class="text-center mb-4">
                            <span class="text-2xl md:text-3xl font-bold text-primary">${totalVotes}</span>
                            <p class="text-gray-600 text-sm md:text-base">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                        </div>
                    </div>
                    <div class="space-y-3 md:space-y-4">
                        ${resultsWithPercentages.map((item, index) => {
                            const isWinner = winner && item.id === winner.id && item.votes > 0;
                            const isSpecial = item.type === 'special';
                            
                            return `
                                <div class="bg-gray-50 rounded-lg p-4 ${isWinner ? 'border-2 border-accent bg-yellow-50' : ''} ${isSpecial ? 'bg-blue-50' : ''}">
                                    <div class="flex justify-between items-center mb-2">
                                        <div class="flex items-center">
                                            ${isWinner ? '<span class="text-xl md:text-2xl mr-2">üèÜ</span>' : ''}
                                            ${item.type === 'candidate' ? 
                                                `<span class="bg-primary text-white rounded-full w-7 h-7 md:w-8 md:h-8 flex items-center justify-center text-sm font-bold mr-3">
                                                    ${item.number}
                                                </span>` : 
                                                `<span class="bg-blue-500 text-white rounded-full w-7 h-7 md:w-8 md:h-8 flex items-center justify-center text-sm font-bold mr-3">
                                                    ${item.id === 'noVote' ? '‚ùå' : '‚ö†Ô∏è'}
                                                </span>`
                                            }
                                            <div>
                                                <h5 class="font-semibold text-gray-800 text-sm md:text-base">${item.name}</h5>
                                                ${item.party ? `<p class="text-xs md:text-sm text-gray-600">${item.party}</p>` : ''}
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <span class="text-lg md:text-xl font-bold text-primary">${item.votes}</span>
                                            <span class="text-xs md:text-sm text-gray-600 ml-1">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</span>
                                            <p class="text-xs md:text-sm text-gray-500">${item.percentage}%</p>
                                        </div>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2.5 md:h-3">
                                        <div class="bg-primary h-2.5 md:h-3 rounded-full transition-all duration-500" 
                                             style="width: ${item.percentage}%"></div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
            }
            
            // Utility Functions
            getStatusBadge(status) {
                const badges = {
                    'setup': '<span class="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full">‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡∏≤‡∏£</span>',
                    'voting': '<span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</span>',
                    'ended': '<span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡πÅ‡∏•‡πâ‡∏ß</span>'
                };
                return badges[status] || badges['setup'];
            }
            
            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                const colors = {
                    'success': 'bg-green-500',
                    'error': 'bg-red-500',
                    'info': 'bg-blue-500',
                    'warning': 'bg-yellow-500'
                };
                
                notification.className = `fixed top-4 right-4 ${colors[type]} text-white px-5 py-3 rounded-lg shadow-lg z-50 transform transition-all duration-300 translate-x-full text-sm md:text-base`;
                notification.textContent = message;
                document.body.appendChild(notification);
                
                // Animate in
                setTimeout(() => {
                    notification.classList.remove('translate-x-full');
                }, 100);
                
                // Animate out and remove
                setTimeout(() => {
                    notification.classList.add('translate-x-full');
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 300);
                }, 3000);
            }
            
            updateCurrentElection() {
                const index = this.elections.findIndex(e => e.id === this.currentElection.id);
                if (index !== -1) {
                    this.elections[index] = this.currentElection;
                    this.saveElections();
                }
            }
            
            saveElections() {
                localStorage.setItem('elections', JSON.stringify(this.elections));
            }
        }
        
        // Global functions for HTML onclick events
        function showCreateElectionModal() {
            electionSystem.showPasswordModal();
        }
        
        function hideCreateElectionModal() {
            electionSystem.hideCreateElectionModal();
        }
        
        function hidePasswordModal() {
            electionSystem.hidePasswordModal();
        }
        
        function showAddCandidateModal() {
            electionSystem.showAddCandidateModal();
        }
        
        function hideAddCandidateModal() {
            electionSystem.hideAddCandidateModal();
        }
        
        function showMainPage() {
            electionSystem.showMainPage();
        }
        
        // Initialize the system when page loads
        let electionSystem;
        document.addEventListener('DOMContentLoaded', () => {
            electionSystem = new ElectionSystem();
        });
        
        // Auto-refresh results every 2 seconds when voting is active
        setInterval(() => {
            if (electionSystem && electionSystem.currentElection && electionSystem.currentElection.status === 'voting') {
                electionSystem.loadResults();
                electionSystem.loadVotingArea();
            }
        }, 2000);
    </script>
</body>
</html>
